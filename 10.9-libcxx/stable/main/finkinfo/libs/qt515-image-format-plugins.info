Info4: <<
Package: qt515-%type_pkg[qt]-image-format-plugins
Version: 5.15.0
Revision: 1
Distribution: 10.13, 10.14, 10.14.5, 10.15
Description: Qt5 image format plugins (%type_pkg[qt])
Type: qt (mac)
License: LGPL
Maintainer: None <fink-devel@lists.sourceforge.net>
### First version 5.3.1 by Hanspeter Niederstrasser
### Free to upgrade and modify parameters, but please discuss
### first on the fink-devel list

Depends: <<
	qt515-%type_pkg[qt]-qtcore-shlibs (>= %v-1),
	qt515-%type_pkg[qt]-qtgui-shlibs (>= %v-1),
	qt515-%type_pkg[qt]-qtsql-sqlite-plugins (>= %v-1),
	qt515-%type_pkg[qt]-qttools-dev-tools (>= %v-1),
	libjasper.1-shlibs,
	libmng2-shlibs,
	libtiff5-shlibs,
	libwebp7-shlibs
<<
BuildDepends: <<
	qt515-%type_pkg[qt]-qtbase-dev-tools (>= %v-1),
	qt515-%type_pkg[qt]-qtbase (>= %v-1),
	fink (>= 0.34.4-1),
	fink-package-precedence,
	libjasper.1,
	libjpeg9,
	libmng2,
	libtiff5,
	libwebp7,
	pkgconfig,
	xcode (>= 10.1),
	xcode.app (>= 10.1),
	( %type_pkg[qt] = x11 ) x11-dev
<<
BuildConflicts: uuid, libevent1.4, libevent2, libev4
Source: https://download.qt.io/official_releases/qt/5.15/%v/submodules/qtimageformats-everywhere-src-%v.tar.xz
Source-MD5: a26b637f0eab4450f1b767fbc2e583c2
PatchScript: <<
	echo "QMAKE_LFLAGS += -L%p/lib" >> .qmake.conf
	echo "QMAKE_EXTRA_ARGS += -jasper" >> .qmake.conf
	echo "QMAKE_EXTRA_ARGS += -mng" >> .qmake.conf
	echo "QMAKE_EXTRA_ARGS += -system-tiff" >> .qmake.conf
	echo "QMAKE_EXTRA_ARGS += -system-webp" >> .qmake.conf
	echo "EXTRA_LIBDIR += %p/lib" >> .qmake.conf
	echo "EXTRA_INCLUDEPATH += %p/include" >> .qmake.conf
<<

NoSetCPPFLAGS: true
NoSetCFLAGS: true
NoSetCXXFLAGS: true

GCC: 4.0
CompileScript: <<
	#!/bin/sh -ev
	. %p/sbin/fink-buildenv-helper.sh
	export QT_FINK_PREFIX=%p/lib/qt515-%type_pkg[qt]
	export PATH=${QT_FINK_PREFIX}/bin:$PATH
	export PKG_CONFIG_PATH=%p/lib/glib-2.0/pkgconfig-strict:$PKG_CONFIG_PATH
	qmake_flags="QMAKE_CXXFLAGS+=\"-MD\""
	qmake_flags="$qmake_flags QMAKE_LFLAGS+=\"-L%p/lib\""
	qmake_flags="$qmake_flags QMAKE_INCLUDEPATH+=\"%p/include\""
	qmake $qmake_flags
	/usr/bin/make -w
	/usr/bin/make -w docs
	fink-package-precedence --depfile-ext='\.d' .
<<

InstallScript: <<
	#!/bin/sh -ev
	export QT_FINK_PREFIX=%p/lib/qt515-%type_pkg[qt]

	make install INSTALL_ROOT=%d
	make install_docs INSTALL_ROOT=%d

	# remove cmake files (for now)
	rm -r %d$QT_FINK_PREFIX/lib
<<
SplitOff40: <<
	Package: qt515-%type_pkg[qt]-qtimageformats-doc
	Description: Qt5 image formats documentation (%type_pkg[qt])
	Files: <<
		lib/qt515-%type_pkg[qt]/share/doc/qt5/qtimageformats{.qch,}
	<<
	DescDetail: Documentation for Qt.
<<
#AppBundles:
DocFiles: LICENSE.LGPLv21 LICENSE.LGPL3

Homepage: http://qt-project.org
DescDetail: <<
Qt is a cross-platform application and UI framework with APIs for
C++ programming and Qt Quick for rapid UI creation.

* Intuitive class libraries
* Easy to use and learn
* Produce highly readable, easily maintainable and reusable code
* High runtime performance and small footprint
<<
DescUsage: <<
To compile against this Qt5, you need to make sure that
"%p/lib/qt515-%type_pkg[qt]/bin" is first in your PATH and that qmake is
present. Qmake is provided by "qt515-%type_pkg[qt]-qtbase-dev-tools".

If you need to manually find the headers and libraries, you
need your compiler flags to contain:

	-F%p/lib/qt515-%type_pkg[qt]/lib

	or this:

	-I%p/lib/qt515-%type_pkg[qt]/include

...and your linker flags to contain:

	-F%p/lib/qt515-%type_pkg[qt]/lib

	or

	-L%p/lib/qt515-%type_pkg[qt]/lib

In this case, it's still a good idea to set your PATH to contain
"%p/lib/qt515-%type_pkg[qt]/bin" as well.
<<
DescPackaging: <<
We follow Ubuntu's lead in using the separate tarballs and separate most
of the packages the same way they do.
<<
<<
# End Info4
